"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[30],{8030:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var s=n(2791),r=n(6030),o=n(5193),i=n(890),l=n(6445),a=n(1889),c=n(2972),d=n(2585),h=n(2363),x=n(9504),j=n(3402),u=n(7621),p=n(4554),m=n(184);const g=function(){return(0,m.jsxs)(u.Z,{sx:{height:170,position:"relative"},children:[(0,m.jsxs)(x.Z,{children:[(0,m.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",children:[(0,m.jsx)(j.Z,{sx:{width:"30%"}}),(0,m.jsxs)(p.Z,{display:"flex",children:[(0,m.jsx)(j.Z,{variant:"circular",width:25,height:25,sx:{mr:2}}),(0,m.jsx)(j.Z,{variant:"circular",width:25,height:25})]})]}),(0,m.jsx)(j.Z,{variant:"rectangular",height:40,sx:{mt:3}})]}),(0,m.jsxs)(h.Z,{sx:{ml:1,position:"absolute",bottom:0},children:[(0,m.jsx)(j.Z,{width:50,height:25,sx:{mr:.5}}),(0,m.jsx)(j.Z,{width:50,height:25})]})]})};var Z=n(9460),f=n(3363),b=n(8429),y=n(9271),v=n(2601),C=n(1773),w=n(3400),S=n(1918),k=n(9157),D=n(7123),W=n(5201),E=n(5289),P=n(4518);const _=function(e){let{project:t,open:n,handleClose:s}=e;const l=(0,r.I0)(),a=(0,o.Z)((e=>e.breakpoints.down("sm")));return(0,m.jsxs)(E.Z,{fullScreen:a,open:n,onClose:s,children:[(0,m.jsx)(W.Z,{children:"Delete project?"}),(0,m.jsxs)(k.Z,{children:[(0,m.jsxs)(i.Z,{color:"text.secondary",display:"inline",children:["Are you sure you want to delete this project -"," "]}),(0,m.jsx)(i.Z,{color:"primary",display:"inline",sx:{fontWeight:"bold"},children:t.name})]}),(0,m.jsxs)(D.Z,{children:[(0,m.jsx)(P.Z,{onClick:s,children:"Cancel"}),(0,m.jsx)(P.Z,{onClick:()=>{t._id,l((0,c.th)(t._id)),s()},children:"Delete"})]})]})};const I=function(e){let{project:t,userId:n,index:r,handleUpdateModalOpen:o}=e;const[l,c]=(0,s.useState)(!1),d=(0,y.k6)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_,{project:t,open:l,handleClose:()=>{c(!1)}}),(0,m.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,m.jsxs)(u.Z,{onClick:()=>{d.push("/project/".concat(t._id))},className:"cursor-pointer no-click-overlay",sx:{py:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,m.jsxs)(x.Z,{children:[n!==t.owner&&(0,m.jsx)(S.Z,{label:"Collaborator",color:"primary",variant:"outlined",size:"small",sx:{mb:2}}),(0,m.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",children:[(0,m.jsx)(i.Z,{variant:"h5",noWrap:!0,sx:{width:"60%"},children:t.name}),n===t.owner&&(0,m.jsxs)(p.Z,{children:[(0,m.jsx)(w.Z,{color:"primary",sx:{mt:-.5},onClick:e=>o(e,r),children:(0,m.jsx)(C.Z,{})}),(0,m.jsx)(w.Z,{color:"primary",sx:{mt:-.5,mr:-1},onClick:e=>{e.stopPropagation(),c(!0)},children:(0,m.jsx)(v.Z,{})})]})]}),(0,m.jsx)(i.Z,{my:2,sx:{whiteSpace:"pre-wrap"},children:t.description})]}),t.technologies&&(0,m.jsx)(h.Z,{sx:{ml:1},children:(0,m.jsx)(a.ZP,{container:!0,rowSpacing:2,columnSpacing:2,children:t.technologies.map((e=>(0,m.jsx)(a.ZP,{item:!0,sx:{display:"flex",alignItems:"center"},children:(0,m.jsx)(S.Z,{size:"small",label:e.technology})},e._id)))})})]})})]})};var z=n(9823),A=n(2419),F=n(5931),M=n(9877),N=n(7705),T=n(9846),U=n(4152);const O={name:{required:{value:!0,message:"Name is required"},maxLength:{value:50,message:"Name cannot be more than 50 characters long"}},description:{maxLength:{value:500,message:"Description cannot be more than 500 characters long"}}};var q=n(2091),B=n(2810),L=n(5446);function R(e){let{chips:t,handleAddChip:n,handleDeleteChip:r,xsScreen:o,xsWidth:i,...l}=e;const[a,c]=(0,s.useState)(""),[d,h]=(0,s.useState)({});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(L.Z,{value:a,errors:d,onSubmit:e=>e.stopPropagation(),onBlur:()=>{d.technologies&&h({})},onKeyDown:e=>{if("Enter"===e.key&&!d.technologies&&a.length){e.preventDefault();const t={technology:a,id:(0,B.Z)()};n(t),c("")}},onChange:e=>{t.length>=5?h({technologies:"Maximum 5 technologies are allowed"}):e.target.value.length>12?h({technologies:"Technology name cannot be more than 12 characters long"}):(c(e.target.value),d.technologies&&h({}))},...l,...!d.technologies&&{helperText:"Maximum 5 technologies"}}),(0,m.jsx)(p.Z,{width:o?i:350,children:t.map((e=>(0,m.jsx)(S.Z,{size:"small",label:e.technology,variant:"outlined",onDelete:()=>r(e.id||e._id),sx:{mr:2,mb:1.5}},e.id||e._id)))})]})}const V=(0,s.memo)(R);var Y=n(1835),G=n(8941);const K=function(e){let{project:t,handleClose:n}=e;const[l,a]=(0,s.useState)([]),{loading:d,addError:h,updateError:x}=(0,Z.Z)(),j=(0,r.I0)(),{width:u}=(0,T.Z)(),g=(0,o.Z)((e=>e.breakpoints.down("sm"))),f=u-u/10;(0,s.useEffect)((()=>{t&&a(t.technologies)}),[t]);const{register:b,handleSubmit:y,formState:{errors:v}}=(0,N.cI)({mode:"onTouched"}),C=(0,s.useCallback)((e=>{a((t=>[...t,e]))}),[]),w=(0,s.useCallback)((e=>{a((t=>t.filter((t=>(t.id||t._id)!==e))))}),[]);return(0,m.jsxs)(q.Z,{children:[d&&(0,m.jsx)(U.Z,{}),(0,m.jsx)(G.Z,{}),(0,m.jsx)(i.Z,{mt:1,mb:4,children:t?"Update project":"Create a project"}),(0,m.jsxs)("form",{onSubmit:y((e=>{const s={...e,technologies:l};if(t){let e=!1;for(const n of Object.keys(s))if(t[n]!==s[n]){e=!0;break}if(!e)return void(null===n||void 0===n||n())}j(t?(0,c.ty)({projectId:t._id,project:s}):(0,c.B)(s)).unwrap().then((()=>{null===n||void 0===n||n()}),(()=>{}))})),children:[h&&(0,m.jsx)(Y.Z,{error:h}),t&&x&&(0,m.jsx)(Y.Z,{error:x}),(0,m.jsx)(L.Z,{fullWidth:!0,type:"text",label:"name",defaultValue:null===t||void 0===t?void 0:t.name,register:b,errors:v,rules:O.name,disabled:d,autoFocus:!0}),(0,m.jsx)(L.Z,{fullWidth:!0,multiline:!0,rows:4,type:"text",label:"description",defaultValue:null===t||void 0===t?void 0:t.description,register:b,errors:v,rules:O.description,disabled:d}),(0,m.jsx)(V,{fullWidth:!0,type:"text",label:"technologies",halfMargin:!0,chips:l,handleAddChip:C,handleDeleteChip:w,xsScreen:g,xsWidth:f,disabled:d}),(0,m.jsx)(p.Z,{textAlign:"center",mt:3,children:(0,m.jsx)(P.Z,{type:"submit",variant:"contained",color:"secondary",size:"large",disabled:d,children:t?"Update":"Create"})})]})]})},H=(0,s.forwardRef)((function(e,t){return(0,m.jsx)(F.Z,{direction:"up",ref:t,...e})}));const J=function(e){let{smScreen:t}=e;const[n,o]=(0,s.useState)(!1),{loading:i,addError:l}=(0,Z.Z)(),a=(0,r.I0)(),c=()=>{l&&a(d.D.resetErrors()),o(!1)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(M.Z,{size:t?"medium":"large",color:"primary",sx:{position:"fixed",right:60,bottom:60,...t&&{right:25,bottom:25}},onClick:()=>{!i&&o(!0)},children:(0,m.jsx)(A.Z,{sx:{fontSize:28}})}),(0,m.jsxs)(E.Z,{fullScreen:!0,open:n,onClose:c,TransitionComponent:H,children:[(0,m.jsx)(w.Z,{color:"inherit",onClick:c,sx:{mx:"auto"},disabled:i,children:(0,m.jsx)(z.Z,{fontSize:"large"})}),(0,m.jsx)(K,{handleClose:c})]})]})};const Q=n.p+"static/media/no-projects.e5c02adb9a4c81432cfd0b1edaaaf22b.svg";const X=function(e){let{smScreen:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("img",{src:Q,alt:"No projects",className:"no-data-image"}),(0,m.jsx)(i.Z,{mt:2,variant:t?"body1":"h6",align:"center",sx:{fontWeight:"light"},children:"You do not have any projects yet."}),(0,m.jsxs)(i.Z,{display:"inline",variant:t?"body1":"h6",color:"primary",sx:{fontWeight:"light"},children:["Get started"," "]}),(0,m.jsx)(i.Z,{display:"inline",variant:t?"body1":"h6",sx:{fontWeight:"light"},children:"by clicking the add button on the bottom right."})]})},$=(0,s.forwardRef)((function(e,t){return(0,m.jsx)(F.Z,{direction:"up",ref:t,...e})}));const ee=function(e){let{project:t,open:n,handleClose:s}=e;const{loading:r}=(0,Z.Z)();return(0,m.jsxs)(E.Z,{fullScreen:!0,open:n,onClose:s,TransitionComponent:$,children:[(0,m.jsx)(w.Z,{color:"inherit",onClick:s,sx:{mx:"auto"},disabled:r,children:(0,m.jsx)(z.Z,{fontSize:"large"})}),(0,m.jsx)(K,{project:t,handleClose:s})]})};const te=function(){const[e,t]=(0,s.useState)(!1),[n,h]=(0,s.useState)(null),{loading:x,projects:j,error:u,updateError:p}=(0,Z.Z)(),{user:y}=(0,f.Z)(),v=(0,r.I0)(),C=(0,o.Z)((e=>e.breakpoints.down("md")));(0,s.useEffect)((()=>{v((0,c.mW)())}),[v]);const w=(e,n)=>{e.stopPropagation(),h(j[n]),t(!0)};return(0,m.jsxs)(l.Z,{sx:{...x&&{height:"90vh",overflowY:"hidden"}},children:[u&&(0,m.jsx)(b.Z,{severity:"error",message:u,handleClose:()=>{v(d.D.resetErrors())}}),(!!j.length||x)&&(0,m.jsx)(i.Z,{variant:"h4",sx:{fontWeight:"bold"},children:"Projects"}),(0,m.jsx)(a.ZP,{container:!0,mt:-2,mb:3,spacing:5,justifyContent:j.length?"flex-start":"center",children:x?[...Array(6)].map(((e,t)=>(0,m.jsx)(a.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,m.jsx)(g,{})},t))):j.length?j.map(((e,t)=>(0,m.jsx)(I,{project:e,userId:y._id,index:t,handleUpdateModalOpen:w},e._id))):(0,m.jsx)(a.ZP,{item:!0,xs:12,sm:7,md:6,sx:{textAlign:"center"},children:(0,m.jsx)(X,{smScreen:C})})}),(0,m.jsx)(J,{smScreen:C}),(0,m.jsx)(ee,{project:n,open:e,handleClose:()=>{p&&v(d.D.resetErrors()),t(!1)}})]})}},9460:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(6030);const r=function(){return(0,s.v9)((e=>e.projects))}}}]);
//# sourceMappingURL=30.7001ca54.chunk.js.map